<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>S'peach: teaching children with autism how to read</title>

		<!-- Bootstrap -->
		<link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
		<link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css">
		
		<!-- Speach CSS -->
		<link rel="stylesheet" href="css/default.css">
		<link rel="stylesheet" href="css/syllabes_count.css">
		<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
		<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
		<!--[if lt IE 9]>
		  <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
		  <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
		<![endif]-->
		
		<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"/>
	</head>
	
	<body>
	<div class="navbar navbar-default navbar-fixed-top" role="navigation">
	  <div class="container">
	<div class="navbar-header">
	  <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
	    <span class="sr-only">Toggle navigation</span>
	    <span class="icon-bar"></span>
	    <span class="icon-bar"></span>
	    <span class="icon-bar"></span>
	  </button>
	  <a class="navbar-brand" href="index.html">S'peach</a>
	</div>
	<div class="collapse navbar-collapse">
	  <ul class="nav navbar-nav">
	    <li><a href="index.html">Home</a></li>
	    <li><a href="#about">About</a></li>
	    <li><a href="#a-propos">A propos</a></li>
	  </ul>
	</div><!--/.nav-collapse -->
	  </div>
	</div>
	
	<div class="container">
		<div class="starter-template">
			<h1>Je mets autant de jetons que j'entends de syllabes</h1>
		</div>
		<div class="row">
			<div class="col-sm-7 main">
				<div class="thumbnail" data-solution="2">
					<img alt="cheval" src="img/obj/cheval.png">
					<div class="caption syllabes-counter" >
						<span class="circle empty"></span>
						<span class="circle empty"></span>
						<span class="circle empty"></span>
						<span class="circle empty"></span>
					</div>
				</div>

				<div class="thumbnail" data-solution="2">
					<img alt="rateau" src="img/obj/rateau.png">
					<div class="caption syllabes-counter">
						<span class="circle empty"></span>
						<span class="circle empty"></span>
						<span class="circle empty"></span>
						<span class="circle empty"></span>
					</div>
				</div>
					
				<div class="thumbnail" data-solution="1">
					<img alt="gants" src="img/obj/gants.png">
					<div class="caption syllabes-counter">
						<span class="circle empty"></span>
						<span class="circle empty"></span>
						<span class="circle empty"></span>
						<span class="circle empty"></span>
					</div>
				</div>	

				<div class="thumbnail" data-solution="1">
					<img alt="chat" src="img/obj/chat.png">
					<div class="caption syllabes-counter">
						<span class="circle empty"></span>
						<span class="circle empty"></span>
						<span class="circle empty"></span>
						<span class="circle empty"></span>
					</div>
				</div>

				<div class="thumbnail" data-solution="2">
					<img alt="tomate" src="img/obj/tomate.png">
					<div class="caption syllabes-counter">
						<span class="circle empty"></span>
						<span class="circle empty"></span>
						<span class="circle empty"></span>
						<span class="circle empty"></span>
					</div>
				</div>
					
				<div class="thumbnail" data-solution="3">
					<img alt="dinosaure" src="img/obj/dinosaure.png">
					<div class="caption syllabes-counter">
						<span class="circle empty"></span>
						<span class="circle empty"></span>
						<span class="circle empty"></span>
						<span class="circle empty"></span>
					</div>
				</div>	
				
				<div class="result-btn">
					<p>Tu joues pour:
						<div id="score">
							<span class="glyphicon glyphicon-star-empty neutral"></span>
							<span class="glyphicon glyphicon-star-empty neutral"></span>
							<span class="glyphicon glyphicon-star-empty neutral"></span>
							<span class="glyphicon glyphicon-star-empty neutral"></span>
							<span class="glyphicon glyphicon-star-empty neutral"></span>
							<span class="glyphicon glyphicon-star-empty neutral"></span>
						</div>
						<a id="correction" class="btn btn-primary btn-long" role="button" href="javsacript;:">OK</a>	
					</p>
				</div>
			</div>
			
			<div class="col-sm-3">
				<h2>Sac Ã  Syllabes</h2>
				<div id="sac-syllabes">
					<span class="circle full"></span>
					<span class="circle full"></span>
					<span class="circle full"></span>
					<span class="circle full"></span>
					<span class="circle full"></span>
					<span class="circle full"></span>
					<span class="circle full"></span>
				</div>
			</div>
			
			<div class="col-sm-2">Ligne temporelle</div>
		</div>
	</div>

	<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
	<!-- Include all compiled plugins (below), or include individual files as needed -->
	<script src="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
	<!-- jQuery UI-->
	<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>
	
	<script>
		$(document).ready(function(){
			activateChips();
			
			$.each($(".main .thumbnail"), function( index, value ) {
				$(this).droppable({
					drop: function(event, ui){
						ui.draggable.remove();
						$(this).children(".caption").children(".empty").first().addClass("full").removeClass("empty");
						addMoreChips();
					}
				});
			});
			
			$("#correction").click(function() {
				var score = 0;
				$(".main .thumbnail").each(function(elmt) {
					var correctAnswer = $(this).attr("data-solution");
					var givenAnswer = $(this).children(".caption").children(".full").length;
					
					var result = givenAnswer == correctAnswer;
					if(result)
					{
						$(this).addClass("correct");
						$(this).removeClass("incorrect");
						score++;
					}
					else
					{
						$(this).addClass("incorrect");
						$(this).removeClass("correct");
					}
				});
				console.log(score);
				
				var counter = 1;
				$("#score .glyphicon").each(function(elmt) {
					if(counter <= score)
					{
						$(this).addClass("correct-star");
					}
					else
					{
						$(this).removeClass("correct-star");
					}
					counter++;
				});
				
				/*for(var i=0; i<score; i++)
				{
					$("#score").append( "<span class='glyphicon glyphicon-star-empty'></span>" );
				}*/
			});
		});
		
		function activateChips(){
			$.each($("#sac-syllabes .circle"), function( index, value ) {
				$(this).draggable({});
				$(this).css('-ms-touch-action', 'none');
			});
		}
		
		function addMoreChips()
		{
			var numberChips = $("#sac-syllabes .circle").length;
			if(numberChips <= 1)
			{
				for(var i=0; i<6; i++)
				{
					$("#sac-syllabes .circle").first().clone().appendTo("#sac-syllabes");
				}
				activateChips();
			}
		}
		
	</script>
  </body>
</html>
